/******************************************
 * gomesoft.com
 *
 * @author          Ethan.zhu（zhuyidong）
 * @copyright       Copyright (c) 2012 gomesoft.com
 * @license         This imageShown jQuery plug-in is dual licensed under the MIT and GPL licenses.
 * @link            http://www.gomesoft.com
 * @docs            http://www.gomesoft.com/plugins/ethan/imageshown
 * @version         Version 1.0
 * @email			pig.whose@gmail.com; 12377166@qq.com
 * 
 *
 ******************************************/
(function($,undefined){function ImageShown(){this.debug=!0,this._blankImg="Content/images/blank.gif",this.classes=[],this.classes[""]={_thumb:"img-thumbnail",_tlist:"img-thumb-list",_items:"img-thumb-items",_item:"img-thumb-item",_btn:"img-thumb-btn",_btnPrev:"img-thumb-btn-prev",_btnNext:"img-thumb-btn-next",_active:"img-thumb-active",_hover:"img-thumb-hover",_aside:"img-thumb-aside",_scroll:"img-thumb-scroll",_sover:"img-thumb-scroll-over",_tover:"img-thumb-item-over",_player:"img-thumb-player",_message:"img-tips-message",_tbackground:"img-tips-background",_tinfo:"img-tips-info",_tipsDeep:"img-tips-deep-nav",_pitem:"img-player-item",_plist:"img-player-list",_otitle:"img-tips-ot",_tbtn:"img-tips-btn",_ptype:"img-player-type",_addtional:"img-thumb-addtional",_missing:"img-load-missing"},this._defaults={id:null,navSpace:47,pWidth:0,pHeight:0,navNum:4,navPlace:null,autoPlay:!0,autoTime:4e3,events:"mouseenter",tbgAnimate:!0,tbgSpeed:"fast",addtional:!1,step:1,scrollSpeed:"fast",opacity:.6,data:null,loop:!0,player:!0,animate:"fade",deepNav:!1,showTips:!0,tipsAnimate:"fade",selected:1,callback:null,preload:!0,target:"_blank",pSpeed:500,pType:!1,tContent:"image",listPlace:null,tipsBtn:!1,loadClass:"img-player-loading",pContent:"image",missing:"内容加载错误"},$.extend(this._defaults,this.classes[""])}function isEmptyObject(a){for(var b in a)return!1;return!0}function extendRemove(a,b){$.extend(a,b);for(var c in b)if(b[c]==null||b[c]==undefined)a[c]=b[c];return a}function isArray(a){return a&&($.browser.safari&&typeof a=="object"&&a.length||a.constructor&&a.constructor.toString().match(/\Array\(\)/))}var PROP_NAME="imageShown",imguuid=(new Date).getTime();$.extend(ImageShown.prototype,{marker:"hasImageShown",log:function(){this.debug&&console.log.apply("",arguments)},setDefaults:function(a){return extendRemove(this._defaults,a||{}),this},_instImageShown:function(elem,settings){var id=elem.id,$elem=$(elem),inlineSettings=null;for(var attrName in this._defaults){var attrValue=elem.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}id||(this.uuid+=1,elem.id="img"+this.uuid),this._defaults.id=elem.id;var inst=this._newInst($(elem));inst.settings=$.extend({},settings||{},inlineSettings||{});if($elem.hasClass(this.marker))return;$elem.addClass(this.marker),$.data(elem,PROP_NAME,inst),this._updateImageShown(inst)},_updateImageShown:function(a){console.log("_updateImageShown");var b=this;a.firstPlay=!1;if(b._g(a,"player")){a.$player=$('<div class="'+b._g(a,"_player")+'" />');if(b._g(a,"preload")){var c=b._g(a,"loadClass");a.$player.hasClass(c)||a.$player.addClass(c)}else a.$player.hasClass(c)&&a.$player.removeClass(c);$('<ul class="'+b._g(a,"_plist")+'" />').appendTo(a.$player)}else a.$player="";a.$nav=$('<div class="'+b._g(a,"_thumb")+'" />'),a.$btnPrev=$('<div class="'+b._g(a,"_btn")+'"><span class="'+b._g(a,"_btnPrev")+'" />'),a.$btnNext=$('<div class="'+b._g(a,"_btn")+" "+b._g(a,"_aside")+'"><span class="'+b._g(a,"_btnNext")+'" />'),a.$navList=$('<div class="'+b._g(a,"_tlist")+'" />'),a.$itemList=$('<ul class="'+b._g(a,"_items")+'" />'),b._g(a,"showTips")?(a.$tipsBg=$('<div class="'+b._g(a,"_tbackground")+'" />'),a.$tipsInfo=$('<div class="'+b._g(a,"_tinfo")+'">')):(a.$tipsBg="",a.$tipsInfo="");var d=b._g(a,"data"),e=a.data;if(d&&!e){a.data=[];var f=d.length,g;for(var h=0;h<f;h++)g=d[h],isEmptyObject(g)||a.data.push(g)}if(e&&d){var i=e.length,f=d.length,g;for(var h=0;h<f;h++)g=d[h],isEmptyObject(g)||(h<i?a.data[h]=g:a.data.push(g))}a.completeImg=[];var j=a.data;j&&isArray(j)&&(a.total=j.length,b._updeteOptions(a),b._instHtml(a),b._initEvents(a))},_instHtml:function(a){var b=this,c=a.data;a.$elem.html("");var d,e,f,g,h,i,j,k=b._g(a,"target"),l=a.total,m=b._g(a,"pHeight"),n=b._g(a,"tContent"),o=b._g(a,"pWidth"),p=b._g(a,"_item"),q=b._g(a,"_pitem"),r=b._g(a,"preload"),s=b._g(a,"player");a.images=[];var t=function(a,b,c,d,e){var f,g,h,i,j,k,l;return j=d||"",k=e||"",typeof a=="string"?(g=a,f=b,h=c,i=""):(l=isArray(a)?a[0]:a,$.isEmptyObject(l)?"":(f=l.l?l.l:b,g=l.p?l.p:"",h=l.t?l.t:c,i=l.a?l.a:"",j=l.w?l.w:j,k=l.h?l.h:k)),g?{l:f,p:g,t:h,a:i,h:k,w:j}:"nothing"},u=function(c,d,e,f,g){var h,i,j,n;return e=="play"?(h=t(c.b,d,k,o,m),n=q):(h=t(c.s,d,k),n=p),h!="nothing"?(h.w&&h.h&&h.w!=""&&h.h!=""?i=r?'<img data-origital="'+h.p+'" width="'+h.w+'" height="'+h.h+'" src="'+b._blankImg+'" alt="'+h.a+'" />':'<img width="'+h.w+'" height="'+h.h+'" src="'+h.p+'" alt="'+h.a+'" />':i=r?'<img data-origital="'+h.p+'" src="'+b._blankImg+'" alt="'+h.a+'" />':'<img src="'+h.p+'" alt="'+h.a+'" />',j=$(['<li class="'+n+'"><a href="'+h.l+'" target="'+h.t+'">'+i+"</a></li>"].join(""))):j=$(['<li class="'+n+'">Need image here.</li>'].join("")),f?j.css({"z-index":l-g,opacity:0}):"",r||$(i).error(function(){j.html('<p class="'+b._g(a,"_missing")+'">'+b._g(a,"missing")+"</p>")}),j},v=function(a,b,c){var d,e,f=c=="nav"?p:q;if(typeof a=="string")d=$("<div>"+a+"</div>"),e=d.find("a"),d=e.size()>0?(e.attr("target",k),$(['<li class="'+f+'">'+d.html()+"</li>"].join(""))):$(['<li class="'+f+'"><a href="'+b+'" target="'+k+'">'+a+"</a></li>"].join(""));else if(typeof a=="object"&&!isEmptyObject(a)){var h=a.l?a.l:g,i=a.t?a.t:k,j=a.p;d=$("<div>"+j+"</div>"),e=d.find("a"),d=e.size()>0?(e.attr("target",i),$(['<li class="'+f+'">'+d.html()+"</li>"].join(""))):$(['<li class="'+f+'"><a href="'+h+'" target="'+i+'">'+j+"</a></li>"].join(""))}return d},w=function(b,c){for(d=0;d<l;d++){j=b[d],g=j.l;if(!isEmptyObject(j)){switch(c){case"image":f=u(j,g);break;case"num":f=$(['<li class="'+p+'"><span>'+(d+1)+"</span></li>"].join(""));break;case"content":f=v(j.s,g,"nav");break;default:f=$(['<li class="'+p+'"><span>&nbsp;</span></li>'].join(""))}f.attr("data-index",d),f.appendTo(a.$itemList)}}};if(s){var x=b._g(a,"pContent");for(d=0;d<l;d++)j=c[d],g=j.l,isEmptyObject(j)||(e=x=="content"?v(j.b,g):u(j,g,"play",!0,d),a.images.push(e),r?"":a.completeImg.push(e),a.$player.find("ul").append(e))}w(c,n),a.$itemList.appendTo(a.$navList);var y=b._g(a,"navNum");typeof y=="string"&&y=="css"?a.$btnPrev=a.$btnNext="":(b._g(a,"tbgAnimate")&&a.$scroll.appendTo(a.$navList),l<=y&&(a.$btnPrev=a.$btnNext="")),b._g(a,"showTips")&&a.$tipsInfo.append($('<div class="'+b._g(a,"_message")+'" />')),a.$nav.append(a.$btnPrev,a.$navList,a.$btnNext),b._g(a,"ptype")&&(a.$playType=$('<div class="'+b._g(a,"_ptype")+'" />')),a.$elem.append(a.$player,a.$nav,a.$tipsBg,a.$tipsInfo,a.$playType);var z=b._g(a,"navPlace"),A,B,C,D,E,F,G=b._g(a,"navSpace"),D=G*b._g(a,"navNum");y!="css"?($first=a.$itemList.find("li:first"),z=="lr"?(A=$first.outerWidth(!0),B=D,F=A,E=l*G):(A=D,B=$first.outerHeight(!0),F=l*G,E=B),a.$navList.css({width:A+"px",height:B+"px"}),b._g(a,"listPlace")=="center"&&(z=="lr"?a.$navList.css({top:"50%","margin-top":0-parseInt(B/2)}):a.$navList.css({left:"50%","margin-left":0-parseInt(A/2)})),a.$itemList.css({width:F+"px",height:E+"px"}),a.$navList=null):b._g(a,"addtional")&&(a.$addtional=$('<div class="'+b._g(a,"_addtional")+'" />'),a.$itemList.find("li").each(function(){var a=$(this);a.height(a.find("img").height()),a.width(a.find("img").width())}),a.$nav.append(a.$addtional.append(a.$itemList.clone())));var H=a.$itemList.find("li");r?H.each(function(){var a=$(this).find("img"),b=a[0];typeof b!="undefined"?b.src=a.attr("data-origital"):""}):"",b._g(a,"loop")?z=="lr"?H.each(function(a){$(this).css({position:"absolute",top:a*G+"px"})}):H.each(function(a){$(this).css({position:"absolute",left:a*G+"px"})}):"";if(s){var I=b._g(a,"animate"),J=a.$player.find("li");switch(I){case"left":J.css({left:o,opacity:1});break;case"right":J.css({left:0-o,opacity:1});break;case"top":J.css({top:0-m,opacity:1});break;case"bottom":J.css({top:m,opacity:1})}}},_updeteOptions:function(a){var b=this,c=b._g(a,"navNum"),d=a.total,e=b._g(a,"step");e=e<d?e<c?b._g(a,"step"):parseInst(c/2):1,extendRemove(a.settings,{step:e}),typeof c=="string"&&c=="css"&&(extendRemove(a.settings,{loop:!1,tbgAnimate:!1}),a.$btnPrev=a.$btnNext=""),b._g(a,"tbgAnimate")?(a.$scroll=$('<div class="'+b._g(a,"_scroll")+'" />'),a.scrollOver=b._g(a,"_sover")):(a.$scroll="",a.scrollOver=b._g(a,"_tover"));var f=b._g(a,"selected");f>a.total?a.selected=0:a.selected=f-1,f=a.selected;if(f>0){var g=a.data[f];for(var h=f;h>0;h--)a.data[h]=a.data[h-1];a.data[0]=g,a.selected=0}},_initEvents:function(a){var b=this,c=function(){var c=b._g(a,"navNum"),d=b._g(a,"addtional"),e=a.$itemList,f=e.find("li"),g=b._g(a,"events");c=="css"&&d&&(e=a.$addtional.find("ul")),e.delegate("li.",g,function(c){var e=$(this),h=e.attr("data-index");g=="click"&&c.preventDefault(),h!=a.selected&&(d?b._thumbSelected(f.eq(h),a):b._thumbSelected(e,a))})},d=function(){var c=a.$nav.find("."+b._g(a,"_btn"));a.$nav=null;var d=b._g(a,"_active"),e=b._g(a,"_hover"),f=b._g(a,"_aside");c&&c.addClass(d),b._g(a,"loop")||a.selected+1<=b._g(a,"navNum")&&c.each(function(){var a=$(this);a.hasClass(f)?a.addClass(d):a.removeClass(d)}),c.hover(function(){var a=$(this);a.hasClass(d)&&a.addClass(e)},function(){var a=$(this);a.hasClass(d)&&a.hasClass(e)&&a.removeClass(e)})};d(),b._btnsNextClick(a),b._btnsPrevClick(a),c();var e=b._g(a,"autoPlay"),f=b._g(a,"loop");a.$elem.hover(function(){a.hoverPause=!0,f?"":a.clickSelected=a.selected,e?b._stop(a):""},function(){a.hoverPause=!1,e&&b._start(a)}),b._thumbSelected(null,a)},_startAuto:function(a){var b=this;a.timeOutID?clearTimeout(a.timeOutID):"",a.preLoad||(a.timeOutID=null,a.timeOutID=b._g(a,"autoPlay")?setTimeout(function(){b._autoPlay(a)},b._g(a,"autoTime")):null)},_autoPlay:function(a){var b=this;if(a.timeOutID&&!a.preLoad){var c;b._g(a,"loop")?(a._selected=a._selected<a.total-1?++a._selected:0,c=a.$itemList.find("li").eq(a._selected)):(a.selected=a.selected<a.total-1?++a.selected:0,c=a.$itemList.find("li").eq(a.selected)),b._thumbSelected(c,a)}a.timeOutID=b._g(a,"autoPlay")?setTimeout(function(){b._autoPlay(a)},b._g(a,"autoTime")):null},_stop:function(a){a.timeOutID&&clearTimeout(a.timeOutID)},_start:function(a){this._startAt(a)},_startAt:function(a){var b=a.$scroll,c=this._g(a,"loop"),d=this._g(a,"navSpace"),e=this._g(a,"navPlace"),f=this._g(a,"navNum"),g=(f-1)*d,h=this._g(a,"tbgAnimate"),i=this._indexAt(a),j=i.position();if(c){j=e=="lr"?j.top:j.left;if(parseInt(j)>g){if(h){var k=e=="lr"?parseInt(b.css("top")):parseInt(b.css("left"));k>g?e=="lr"?b.css("top",0):b.css("left",0):""}this._thumbSelected(null,a)}}else{var l=a.$itemList,m=e=="lr"?l.css("top"):l.css("left");j=e=="lr"?j.top:j.left,m=Math.abs(parseInt(m)),selecttedPos=Math.abs(parseInt(j));if(selecttedPos<m)a.selected=parseInt(m/d);else if(m+g<j){a.selected=parseInt(m/d);if(h){var k=e=="lr"?parseInt(b.css("top")):parseInt(b.css("left"));k>g?e=="lr"?b.css("top",0):b.css("left",0):""}}else a.clickSelected=a.selected;a.clickSelected!=a.selected&&this._thumbSelected(null,a)}this._startAuto(a)},_thumbSelected:function(a,b){var c=this,d=c._g(b,"tbgSpeed"),e=b.scrollOver,f=c._g(b,"navPlace"),g=c._g(b,"tbgAnimate"),h="",i=c._g(b,"tContent"),j=b.$itemList,k=c._g(b,"loop");b.firstPlay||(b.firstPlay=!0),a?"":k?a=j.find("li").eq(0):a=j.find("li").eq(b.selected),h=a.attr("data-index"),b.firstPlay?(b.selected=-1,b.firstPlay=!1):"",b.selected=b.clickSelected=h,b._selected=a.index();if(i=="image"){var l=a.find("img"),m=c._g(b,"opacity");typeof l[0]!="undefined"?l.stop().animate({opacity:1},"fast"):"",a.siblings().each(function(){var a=$(this),b=a.find("img");typeof b[0]!="undefined"?b.stop().animate({opacity:m},"fast"):""})}var n,o,p;f=="lr"?(n=a.position().top,o=j.css("top"),p=n-Math.abs(parseInt(o))):(n=a.position().left,o=j.css("left"),p=n-Math.abs(parseInt(o)));var q=c._g(b,"navSpace"),r=c._g(b,"navNum"),s=q*(r-1),t=function(a){p>s?c._scrollNextByStep(b):p<0?c._resetSelected(b):"",a?"":$(this).css("z-index",3)};c._display(b);if(g){var q=c._g(b,"navSpace"),u=b.$scroll;f=="lr"?u.css("z-index",5).stop(!0,!0).animate({top:p},d,t):u.css("z-index",5).stop(!0,!0).animate({left:p},d,t)}else t(!0);a.addClass(e).siblings().removeClass(e)},_resetSelected:function(a){var b=this,c=b._g(a,"tbgAnimate"),d=b._g(a,"navPlace"),e=b._g(a,"tbgSpeed"),f=a.$scroll;b._scrollNext(a,0,function(){b._enabledBtnNext(a),b._disabledBtnPrev(a)}),c?d=="lr"?f.animate({top:0},e):f.animate({left:0},e):""},_setInfo:function(a){var b=this,c=b._g(a,"showTips");if(c){var d=a.$tipsBg,e=a.$tipsInfo,f=a.selected,g=a.data[f],h=g.l,i=b._g(a,"target"),j=b._g(a,"_ptype"),k=b._g(a,"ptype");if(k){var l=g.tp,m;m=l?j+" "+j+"-"+l:j,a.$playType[0].className=m}var n=function(a,b,c){var d;if(typeof a=="string")return d=b=="none"?a:'<a href="'+b+'" target="'+c+'">'+a+"</a>";if(typeof a=="object"){var e=a.l?a.l:b,f=a.g?a.g:c;return d=e=="none"?a.t:'<a href="'+e+'" target="'+f+'">'+a.t+"</a>"}return""},o=function(a,b,c){if(a&&!isArray(a))return n(a,b,c);var d=a.length,e="";for(var f=0;f<d;f++)e+=n(a[f],b,c);return e};GOT=function(c,d,e){var f=b._g(a,"_otitle");if(typeof c=="string")return'<p class="'+f+'">'+c+"</p>";if(typeof c=="object"){if(c&&!isArray(c))return'<p class="'+f+'"><label class="name">'+n(c.n,"none")+": </label>"+o(c.list,d,e)+"</p>";var g=c.length,h=[],i;for(var j=0;j<g;j++)i=c[j],h.push('<p class="'+f+'">'),h.push('<label class="name">'+n(i.n,"none")+": </label>"),h.push(o(i.list,d,e)),h.push("</p>");return h.join("")}};var p=function(a,b,c,d){if(typeof a=="string")return'<a class="'+d+" "+d+"-"+a+'" href="'+b+'" target="'+c+'"></a>';if(typeof a!="object")return'<a class="'+d+'" href="'+b+'" target="'+c+'"></a>';var e,f,g,h;if(!isEmptyObject(a))return e=a.l?a.l:b,f=a.t?a.t:c,g=a.c?d+"-"+a.c:d,h=a.t_?a.t_:"",'<a class="'+d+" "+g+'" href="'+e+'" target="'+f+'">'+h+"</a>"},q="",r=n(g.t,h,i),s=n(g.t1,h,i),t="";r=r!=""?"<h2>"+r+"</h2>":"",s=s!=""?"<h3>"+s+"</h3>":"";if(r!=""||s!="")t='<hr class="separator" />';q+=r+s+t;var u=g.ot;u=GOT(u,h,i,a),u=typeof u!="undefined"?u:"";var v=g.m?'<p class="info">'+g.m+"</p>":"";q+=u+v;if(b._g(a,"tipsBtn")){var w=b._g(a,"_tbtn"),x=p(g.b_,h,i,w);q+=x}b._tipsAnimate(a,q)}},_tipsAnimate:function(a,b){var c=a.$tipsInfo,d=a.$tipsBg,e=this._g(a,"tipsAnimate"),f=c.find("div").not(".tips-corner");switch(e){case"slide":b!=""?(f.html("").html(b),c.stop(!1,!0).slideUp("normal").stop(!1,!0).slideDown("normal"),d.stop(!1,!0).slideUp("normal").stop(!1,!0).slideDown("normal")):(f.html(""),c.stop(!1,!0).slideUp("fast"),d.stop(!1,!0).slideUp("fast"));break;case"fade":b!=""?(f.html("").html(b),c.stop(!1,!0).fadeOut("normal").stop(!1,!0).fadeIn("normal"),d.stop(!1,!0).fadeOut("normal").stop(!1,!0).fadeIn("normal")):(f.html(""),c.stop(!1,!0).fadeOut("fast"),d.stop(!1,!0).fadeOut("fast"));break;default:b!=""?(f.html("").html(b),c.show(),d.show()):(f.html(""),c.hide(),d.hide())}},_setCallback:function(a){var b=a.data,c=a.selected,d=a.images,e={id:a.id,selected:a.selected,total:a.total,curData:b[c]?b[c]:""};a.callDone=e},_display:function(a,b){var c=this;c._stop(a);var d=c._g(a,"player"),b=c._g(a,"callback");b?c._setCallback(a):"",a.preLoad=!0;if(!d)b?b(a.callDone):"",a.preLoad=!1,a.hoverPause||c._startAuto(a);else{var e=c._g(a,"animate"),f=a.$itemList,g=a.total,h=a.$player,i=a.images;getList=function(a){return i[a]},loadListImg=function(a){var b=a.find("img");if(typeof b[0]!="undefined"){var d=b[0].src,e=b.attr("data-origital");d===c._blankImg?b[0].src=b.attr("data-origital"):d!=e?b[0].src=e:""}},dataIndex=a.selected,a.$currentli=getList(dataIndex),c._g(a,"preload")?loadListImg(a.$currentli):"";var j=c._g(a,"pSpeed"),k=c._g(a,"pWidth"),l=c._g(a,"pHeight"),m=a.$currentli.index(),n=a.$currentli.find("img"),o=function(){var b=a.$currentli,d=a.played;switch(e){case"fade":c._playWithFade(b,j,g,function(){a.played=b});break;case"left":c._playLeftRight(b,k,g,j,function(){a.played=b,b.siblings().css("left",k)},"left");break;case"right":c._playLeftRight(b,k,g,j,function(){a.played=b,b.siblings().css("left",0-k)});break;case"bottom":c._playDwonUp(b,l,g,j,function(){a.played=b,b.siblings().css("top",l)},"bottom");break;case"top":c._playDwonUp($curli,l,g,j,function(){a.played=b,b.siblings().css("top",0-l)});break;default:b.stop().css("opacity",1).show().siblings().css("opacity",0).hide()}a.hoverPause||c._startAuto(a),c._setInfo(a)};f.each(function(){$(this).find("img").unbind()});if(a.completeImg[m])a.preLoad=!1,o(),b?b(a.callDone):"";else{var p=a.played;p&&p.css("opacity","0.3");var q=function(){a.preLoad=!1,o(),b?b(a.callDone):""};n[0]?n.load(function(){q()}).error(function(){a.$currentli.html('<p class="'+c._g(a,"_missing")+'">'+c._g(a,"missing")+"</p>"),q()}):q(),a.completeImg.push($(this))}}},_playLeftRight:function(a,b,c,d,e,f){var g=b,h=c,i=d,j,k,l=e||function(){};f=="left"?(j=g,k=0-g):(j=0-g,k=g),a.siblings("li").each(function(a){var b=$(this);b.css({"z-index":h-a});var c=parseInt(b.css("left"));f=="left"?c<j&&c>=0?b.animate({left:k},d,function(){b.css({left:j})}):"":c<k&&c>=0?b.animate({left:k},d,function(){b.css({left:j})}):""}),a.css("opacity")&&a.css("opacity")<1&&a.css("opacity",1),a.stop(!0,!0).css({"z-index":h+1,left:j}).animate({left:0},d,l)},_playDwonUp:function(a,b,c,d,e,f){var g=b,h=c,i=d,j,k,l=e||function(){};f=="bottom"?(j=g,k=0-g):(j=0-g,k=g),a.siblings("li").each(function(a){var b=$(this);b.css({"z-index":h-a});var c=parseInt(b.css("top"));f=="bottom"?c<j&&c>=0?b.animate({top:k},d,function(){b.css({top:j})}):"":c<k&&c>=0?b.animate({top:k},d,function(){b.css({top:j})}):""}),a.css("opacity")&&a.css("opacity")<1&&a.css("opacity",1),a.stop(!0,!0).css({"z-index":h+1,top:j}).animate({top:0},d,l)},_playWithFade:function(a,b,c,d){var e=d||function(){};a.siblings().each(function(a){$(this).css({"z-index":c-a})}),a.siblings().stop().animate({opacity:0},b),a.css("z-index",c+1).stop().animate({opacity:1},b,e)},_indexAt:function(a){var b=a.selected,c=a.$itemList.find("li"),d,e,f=null,g;for(d=0,e=c.length;d<e;d++){g=$(c[d]);if(g.attr("data-index")===b){f=g;break}}return f},_btnsPrevClick:function(a){if(!a.$btnPrev||a.$btnPrev=="")return;var b=this,c=b._g(a,"navSpace"),d=b._g(a,"step"),e=a.total,f=b._g(a,"scrollSpeed"),g=b._g(a,"navPlace"),h=b._g(a,"tbgAnimate"),i=b._g(a,"loop"),j,k,l=a.$itemList;a.$btnPrev.bind("click",function(){if(i){if(a.btnClick){a.btnClick=!1;if(g=="lr"){h&&(k=a.$scroll,j=b._indexAt(a),scrollPos=parseInt(k.css("top")),scrollPos<(e-d)*c?"":k.css({top:j.css("top")})),l.find("li:gt("+(e-d-1)+")").insertBefore(l.find("li:first")).each(function(a){var b=$(this),d=parseInt(b.css("top"));b.css({top:d-e*c})}),l.find("li").each(function(b){var g=$(this);g.stop(!0,!0).animate({top:parseInt(g.css("top"))+d*c},f,function(){b===e-d&&(a.btnClick=!0)})});if(h){var m=b._g(a,"tbgSpeed");k.stop(!0,!0).animate({top:parseInt(j.css("top"))+c*d},m,function(){parseInt(k.css("top"))===(e-1)*c&&k.css({top:c*d-parseInt(j.css("top"))})})}}else{h&&(k=a.$scroll,j=b._indexAt(a),scrollPos=parseInt(k.css("left")),scrollPos<(e-d)*c?"":k.css({left:j.css("left")})),l.find("li:gt("+(e-d-1)+")").insertBefore(l.find("li:first")).each(function(a){var b=$(this),d=parseInt(b.css("left"));b.css({left:d-e*c})}),l.find("li").each(function(b){var g=$(this);g.stop(!0,!0).animate({left:parseInt(g.css("left"))+d*c},f,function(){b===e-d&&(a.btnClick=!0)})});if(h){var m=b._g(a,"tbgSpeed");k.stop(!0,!0).animate({left:parseInt(j.css("left"))+c*d},m,function(){parseInt(k.css("left"))===(e-1)*c&&k.css({left:c*d-parseInt(j.css("left"))})})}}}}else a.btnClick&&b._scrollPrevByStep(a)})},_btnsNextClick:function(a){if(!a.$btnNext||a.$btnNext=="")return;var b=this;a.$btnNext.bind("click",function(){a.btnClick&&b._scrollNextByStep(a,!0)})},_scrollPrevByStep:function(a){var b=this,c=a.total,d=b._g(a,"navNum"),e=b._g(a,"navSpace"),f=b._g(a,"step"),g=a.$itemList,h=b._g(a,"navPlace"),i=b._g(a,"loop"),j=b._g(a,"tbgAnimate");if(!i){b._enabledBtnNext(a);var k=h=="lr"?parseInt(g.css("top")):parseInt(g.css("left")),l=e*f;if(k===0)return;a.btnClick=!1;var m=0,n=h=="lr"?parseInt(g.css("top"))+e*f:parseInt(g.css("left"))+e*f;n>0?(m=n,n=0):"",b._scrollPrev(a,n,function(){h=="lr"?Math.abs(parseInt(g.css("top")))===0?b._disabledBtnPrev(a):"":Math.abs(parseInt(g.css("left")))===0?b._disabledBtnPrev(a):"",a.btnClick=!0});if(j){var o=a.$scroll,p=b._g(a,"tbgSpeed"),q=h=="lr"?parseInt(o.css("top"))+l:parseInt(o.css("left"))+l;h=="lr"?o.animate({top:q-m},p):o.animate({left:q-m},p)}}},_scrollNextByStep:function(a,b){var c=this,d=a.total,e=c._g(a,"navNum"),f=c._g(a,"navSpace"),g=c._g(a,"step"),h=a.$itemList,i=c._g(a,"navPlace"),j=c._g(a,"loop"),k=c._g(a,"tbgAnimate"),l=a.$scroll,m=c._g(a,"tbgSpeed"),n=c._g(a,"scrollSpeed");if(!j){c._enabledBtnPrev(a);var o=i=="lr"?parseInt(h.css("top")):parseInt(h.css("left")),p=(d-e)*f,q=f*g,r;if(Math.abs(o)===p)return;a.btnClick=!1,r=o-q,over=0,Math.abs(r)>p?(over=Math.abs(r)-p,r=0-p):"",c._scrollNext(a,r,function(){i=="lr"?Math.abs(parseInt(h.css("top")))===(d-e)*f?c._disabledBtnNext(a):"":Math.abs(parseInt(h.css("left")))===(d-e)*f?c._disabledBtnNext(a):"",a.btnClick=!0});if(k){var s=i=="lr"?parseInt(l.css("top"))-q:parseInt(l.css("left"))-q;i=="lr"?l.animate({top:s+over},m):l.animate({left:s+over},m)}}else{a.btnClick=!1;if(i=="lr"){h.find("li").each(function(e){$(this).stop().animate({top:f*(e-g)},n,function(){if(e===d-g){h.find("li:lt("+g+")").insertAfter(h.find("li:last")).each(function(a){var b=$(this),c=parseInt(b.css("top"));b.css({top:d*f+c})});if(!b){var i=c._indexAt(a);a._selected=i.index()}}})});if(k&&b){var t=c._indexAt(a);l.stop(!0,!0).animate({top:parseInt(t.css("top"))-f*g},m,function(){var a=parseInt(l.css("top"));a<0&&l.css({top:t.css("top")})})}k&&!b&&l.stop().animate({top:(e-g)*f},m)}else{h.find("li").each(function(e){$(this).stop().animate({left:f*(e-g)},n,function(){if(e===d-g){a.btnClick=!0,h.find("li:lt("+g+")").insertAfter(h.find("li:last")).each(function(a){var b=$(this),c=parseInt(b.css("left"));b.css({left:d*f+c})});if(!b){var i=c._indexAt(a);a._selected=i.index()}}})});if(k&&b){var t=c._indexAt(a);l.stop(!0,!0).animate({left:parseInt(t.css("left"))-f*g},m,function(){var a=parseInt(l.css("left"));a<0&&l.css({left:t.css("left")})})}if(k&&!b){var l=a.$scroll;l.stop().animate({left:(e-g)*f},m)}}}},_scrollPrev:function(a,b,c){var d=a.$itemList,e=this._g(a,"loop"),f=this._g(a,"scrollSpeed");position=this._g(a,"navPlace"),func=c||function(){},e||(position=="lr"?d.animate({top:b},f,func):d.animate({left:b},f,func))},_scrollNext:function(a,b,c){var d=a.$itemList,e=this._g(a,"loop"),f=this._g(a,"scrollSpeed");position=this._g(a,"navPlace"),func=c||function(){},e||(position=="lr"?d.animate({top:b},f,func):d.animate({left:b},f,func))},_enabledBtnPrev:function(a){var b=this._g(a,"_active");a.$btnPrev.hasClass(b)||a.$btnPrev.addClass(b)},_enabledBtnNext:function(a){var b=this._g(a,"_active");a.$btnNext.hasClass(b)||a.$btnNext.addClass(b)},_disabledBtnPrev:function(a){var b=this._g(a,"_active"),c=this._g(a,"_hover"),d=a.$btnPrev;d.hasClass(b)&&(d.removeClass(b),d.hasClass(c)&&d.removeClass(c))},_disabledBtnNext:function(a){var b=this._g(a,"_active"),c=this._g(a,"_hover"),d=a.$btnNext;d.hasClass(b)&&(d.removeClass(b),d.hasClass(c)&&d.removeClass(c))},_newInst:function(a){var b=a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:b,$elem:a,$nav:"",$btnPrev:"",$btnNext:"",$scroll:"",$navList:"",$itemList:"",$player:"",hoverPause:!1,preLoad:!0,selected:0,_selected:0,timeOutID:null,$currentli:null,clickSelected:0,$tipsBg:"",$tipsInfo:"",$deepNav:"",completeImg:[],scrollOver:null,data:null,images:[],total:0,btnClick:!0,callDone:null,played:null,$tipsType:null,firstPlay:null,$playType:"",build:!1}},_g:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_getInst:function(a){try{return $.data(a,PROP_NAME)}catch(b){throw"Missing instance data for this imageShown"}},_optionImageShown:function(a,b,c){var d=this._getInst(a);if(arguments.length==2&&typeof b=="string")return b=="defaults"?$.extend({},$.imageShownT._defaults):d?b=="all"?$.extend({},d.settings):this._g(d,b):null;var e=b||{};typeof b=="string"&&(e={},e[b]=c),d&&(extendRemove(d.settings,e),console.log(d.build),d.build?d.build=!1:this._updateImageShown(d)),d=null},_extendRemove:function(a,b){extendRemove(a,b)}}),$.fn.imageShown=function(a){if(!this.length)return this;$.imageShown.initialized||($.imageShown.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return a=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.imageShown["_"+a+"ImageShown"].apply($.imageShown,[this[0]].concat(b)):this.each(function(){typeof a=="string"?$.imageShown["_"+a+"ImageShown"].apply($.imageShown,[this].concat(b)):$.imageShown._instImageShown(this,a)})},$.imageShown=new ImageShown,$.imageShown.initialized=!1,$.imageShown.uuid=(new Date).getTime(),$.imageShown.version="@VERSION"})(jQuery)