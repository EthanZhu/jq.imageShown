/******************************************
 * gomesoft.com
 *
 * @author          Ethan.zhu (zhuyidongï¼‰
 * @copyright       Copyright (c) 2012 gomesoft.com
 * @license         This imageShown jQuery plug-in is dual licensed under the MIT and GPL licenses.
 * @link            http://www.gomesoft.com
 * @docs            http://www.gomesoft.com/plugins/ethan/imageshown
 * @version         Version 1.0
 * @email			pig.whose@gmail.com; 12377166@qq.com
 * 
 *
 ******************************************/
(function($,undefined){function ImageShown(){this.debug=!0,this._blankImg="Content/images/blank.gif",this.classes=[],this.classes[""]={_thumb:"img-thumbnail",_tlist:"img-thumb-list",_items:"img-thumb-items",_item:"img-thumb-item",_btn:"img-thumb-btn",_btnPrev:"img-thumb-btn-prev",_btnNext:"img-thumb-btn-next",_active:"img-thumb-active",_hover:"img-thumb-hover",_aside:"img-thumb-aside",_scroll:"img-thumb-scroll",_sover:"img-thumb-scroll-over",_tover:"img-thumb-item-over",_player:"img-thumb-player",_message:"img-tips-message",_tbackground:"img-tips-background",_tinfo:"img-tips-info",_tipsDeep:"img-tips-deep-nav",_pitem:"img-player-item",_plist:"img-player-list",_otitle:"img-tips-ot",_tbtn:"img-tips-btn",_ptype:"img-player-type",_addtional:"img-thumb-addtional",_clear:"clearfix"},this._defaults={id:null,navSpace:47,pWidth:0,pHeight:0,navNum:4,navPlace:null,autoPlay:!0,autoTime:4e3,events:"mouseenter",tbgAnimate:!0,tbgSpeed:"fast",addtional:!1,step:1,scrollSpeed:"fast",opacity:.6,data:null,loop:!0,player:!0,animate:"fade",deepNav:!1,showTips:!0,tipsAnimate:"fade",selected:1,callback:null,preloading:!0,target:"_blank",pSpeed:500,pType:!1,tType:"image",listPlace:null,tipsBtn:!1,loadClass:"img-player-loading",pContent:null},$.extend(this._defaults,this.classes[""])}function isEmptyObject(a){for(var b in a)return!1;return!0}function extendRemove(a,b){$.extend(a,b);for(var c in b)if(b[c]==null||b[c]==undefined)a[c]=b[c];return a}function isArray(a){return a&&($.browser.safari&&typeof a=="object"&&a.length||a.constructor&&a.constructor.toString().match(/\Array\(\)/))}var PROP_NAME="imageShown",imguuid=(new Date).getTime();$.extend(ImageShown.prototype,{_a:"hasImageShown",_b:function(){this.debug&&console.log.apply("",arguments)},setDefaults:function(a){return extendRemove(this._defaults,a||{}),this},_instImageShown:function(b,c){var id=b.id,$elem=$(b),d=null;for(var e in this._defaults){var f=b.getAttribute("date:"+e);if(f){d=d||{};try{d[e]=eval(f)}catch(err){d[e]=f}}}id||(this.uuid+=1,b.id="img"+this.uuid),this._defaults.id=b.id;var a=this._newInst($(b));a.settings=$.extend({},c||{},d||{});if($elem.hasClass(this._a))return;$elem.addClass(this._a),$.data(b,PROP_NAME,a),this._updateImageShown(a)},_updateImageShown:function(a){var b=this;a.firstPlay=!1;if(b._g(a,"player")){a.$player=$('<div class="'+b._g(a,"_player")+'" />');if(b._g(a,"preloading")){var c=b._g(a,"loadClass");a.$player.hasClass(c)||a.$player.addClass(c)}else a.$player.hasClass(c)&&a.$player.removeClass(c);$('<ul class="'+b._g(a,"_plist")+'" />').appendTo(a.$player)}else a.$player="";a.$nav=$('<div class="'+b._g(a,"_thumb")+'" />'),a.$btnPrev=$('<div class="'+b._g(a,"_btn")+'"><span class="'+b._g(a,"_btnPrev")+'" />'),a.$btnNext=$('<div class="'+b._g(a,"_btn")+" "+b._g(a,"_aside")+'"><span class="'+b._g(a,"_btnNext")+'" />'),a.$navList=$('<div class="'+b._g(a,"_tlist")+'" />'),a.$itemList=$('<ul class="'+b._g(a,"_items")+" "+b._g(a,"_clear")+'" />'),b._g(a,"showTips")?(a.$tipsBg=$('<div class="'+b._g(a,"_tbackground")+'" />'),a.$tipsInfo=$('<div class="'+b._g(a,"_tinfo")+'">')):(a.$tipsBg="",a.$tipsInfo="");var d=b._g(a,"data"),e=a.data;if(d&&!e){a.data=[];var f=d.length,g;for(var h=0;h<f;h++)g=d[h],isEmptyObject(self)||a.data.push(g)}if(e&&d){var i=e.length,f=d.length,g;for(var h=0;h<f;h++)self=d[h],isEmptyObject(g)||(h<i?a.data[h]=g:a.data.push(g))}a.completeImg=[];var j=a.data;j&&isArray(j)&&(a.total=j.length,b._updeteOptions(a),b._instHtml(a),b._initEvents(a))},_getProperty:function(a,b,c,d,e){var f,g,h,i,j,k,l;return j=d||"",k=e||"",typeof a=="string"?(g=a,f=b,h=c,i=""):(l=isArray(a)?a[0]:a,$.isEmptyObject(l)?"":(f=l.l?l.l:b,g=l.p?l.p:"",h=l.t?l.t:c,i=l.a?l.a:"",j=l.w?l.w:j,k=l.h?l.h:k)),g?{l:f,p:g,t:h,a:i,h:k,w:j}:"nothing"},_instHtml:function(a){var b=this,c=a.data;a.$elem.html("");var d,e,f,g,h,i,j,k=b._g(a,"target"),l=a.total,m=b._g(a,"pHeight"),n=b._g(a,"tContent"),o=b._g(a,"pWidth"),p=b._g(a,"_item"),q=b._g(a,"_pitem"),r=b._g(a,"preload"),s=b._g(a,"player");a.images=[];var t=function(a,c,d,e,f){var g,h,i,j;return d=="play"?(g=b._getProperty(a.b,c,k,o,m),j=q):(g=b._getProperty(a.s,c,k),j=p),g!="nothing"?(g.w&&g.h&&g.w!=""&&g.h!=""?h=r?'data-origital="'+g.p+'" width="'+g.w+'" height="'+g.h+'" src="'+b._blankImg+'"':'width="'+g.w+'" height="'+g.h+'" src="'+g.p+'"':h=r?'data-origital="'+g.p+'" src="'+b._blankImg+'"':'src="'+g.p+'"',i=$(['<li class="'+j+'"><a href="'+g.l+'" target="'+g.t+'"><img '+h+' alt="'+g.a+'" /></a></li>'].join(""))):i=$(['<li class="'+j+'">Need image here.</li>'].join("")),e?i.css({"z-index":l-f,opacity:0}):"",i},u=function(a,b,c){var d,e,f=c=="nav"?p:q;if(typeof a=="string")d=$("<div>"+a+"</div>"),e=d.find("a"),d=e.size()>0?(e.attr("target",k),$(['<li class="'+f+'">'+d.html()+"</li>"].join(""))):$(['<li class="'+f+'"><a href="'+b+'" target="'+k+'">'+a+"</a></li>"].join(""));else if(typeof a=="object"&&!isEmptyObject(a)){var h=a.l?a.l:g,i=a.t?a.t:k,j=a.p;d=$("<div>"+j+"</div>"),e=d.find("a"),d=e.size()>0?(e.attr("target",i),$(['<li class="'+f+'">'+d.html()+"</li>"].join(""))):$(['<li class="'+f+'"><a href="'+h+'" target="'+i+'">'+j+"</a></li>"].join(""))}return d},v=function(b,c){for(d=0;d<l;d++){j=b[d],g=j.l;if(!isEmptyObject(j)){switch(c){case"image":f=t(j,g);break;case"num":f=$(['<li class="'+p+'"><span>'+(d+1)+"</span></li>"].join(""));break;case"content":f=u(j.s,g,"nav");break;default:f=$(['<li class="'+p+'"><span>&nbsp;</span></li>'].join(""))}f.attr("data-index",d),f.appendTo(a.$itemList)}}};if(s){var w=b._g(a,"pContent");for(d=0;d<l;d++)j=c[d],g=j.l,isEmptyObject(j)||(e=w=="content"?u(j.b,g):t(j,g,"play",!0,d),a.images.push(e),r?"":a.completeImg.push(e),a.$player.find("ul").append(e))}v(c,n),a.$itemList.appendTo(a.$navList);var x=b._g(a,"navNum");typeof x=="string"&&x=="css"?a.$btnPrev=a.$btnNext="":(b._g(a,"tbgAnimate")&&a.$scroll.appendTo(a.$navList),l<=x&&(a.$btnPrev=a.$btnNext="")),b._g(a,"showTips")&&a.$tipsInfo.append($('<div class="'+b._g(a,"_message")+'" />')),a.$nav.append(a.$btnPrev,a.$navList,a.$btnNext),b._g(a,"ptype")&&(a.$playType=$('<div class="'+b._g(a,"_ptype")+'" />')),a.$elem.append(a.$player,a.$nav,a.$tipsBg,a.$tipsInfo,a.$playType);var y=b._g(a,"navPlace"),z,A,B,C,D,E,F=b._g(a,"navSpace"),C=F*b._g(a,"navNum");x!="css"?($first=a.$itemList.find("li:first"),y=="lr"?(z=$first.outerWidth(!0),A=C,E=z,D=l*F):(z=C,A=$first.outerHeight(!0),E=l*F,D=A),a.$navList.css({width:z+"px",height:A+"px"}),b._g(a,"listPlace")=="center"&&(y=="lr"?a.$navList.css({top:"50%","margin-top":0-parseInt(A/2)}):a.$navList.css({left:"50%","margin-left":0-parseInt(z/2)})),a.$itemList.css({width:E+"px",height:D+"px"}),a.$navList=null):b._g(a,"addtional")&&(a.$addtional=$('<div class="'+b._g(a,"_addtional")+'" />'),a.$itemList.find("li").each(function(){var a=$(this);a.height(a.find("img").height()),a.width(a.find("img").width())}),a.$nav.append(a.$addtional.append(a.$itemList.clone())));var G=a.$itemList.find("li");r?G.each(function(){var a=$(this).find("img"),b=a[0];typeof b!="undefined"?b.src=a.attr("data-origital"):""}):"",b._g(a,"loop")?y=="lr"?G.each(function(a){$(this).css({position:"absolute",top:a*F+"px"})}):G.each(function(a){$(this).css({position:"absolute",left:a*F+"px"})}):"";if(s){var H=b._g(a,"animate"),I=a.$player.find("li");switch(H){case"left":I.css({left:o,opacity:1});break;case"right":I.css({left:0-o,opacity:1});break;case"top":I.css({top:0-m,opacity:1});break;case"bottom":I.css({top:m,opacity:1})}}},_updeteOptions:function(a){var b=this,c=b._g(a,"navNum"),d=a.total,e=b._g(a,"step");e=e<d?e>c?parseInt(c/2):b._g(a,"step"):1,extendRemove(a.settings,{step:e}),typeof c=="string"&&c=="css"&&(extendRemove(a.settings,{loop:!1,tbgAnimate:!1}),a.$btnPrev=a.$btnNext=""),b._g(a,"tbgAnimate")?(a.$scroll=$('<div class="'+b._g(a,"_scroll")+'" />'),a.scrollOver=b._g(a,"_sover")):(a.$scroll="",a.scrollOver=b._g(a,"_tover"));var f=b._g(a,"selected");f>d?a.selected=0:a.selected=f-1,f=a.selected;if(f>0){var g=a.data[f];for(var h=f;h>0;h--)a.data[h]=a.data[h-1];a.data[0]=g,a.selected=0}},_btnsHover:function(a){var b=this,c;c=a.$nav.find("."+b._g(a,"_btn")),a.$nav=null;var d=b._g(a,"_active"),e=b._g(a,"_hover"),f=b._g(a,"_aside");c&&c.addClass(d),b._g(a,"loop")||a.selected+1<=b._g(a,"navNum")&&c.each(function(){var a=$(this);a.hasClass(f)?a.addClass(d):a.removeClass(d)}),c.hover(function(){var a=$(this);a.hasClass(d)&&a.addClass(e)},function(){var a=$(this);a.hasClass(d)&&a.hasClass(e)&&a.removeClass(e)})},_initEvents:function(a){var b=this;b._btnsHover(a),b._btnsNextClick(a),b._btnsPrevClick(a),b._bindItemEvent(a);var c=b._g(a,"autoPlay"),d=b._g(a,"loop");a.$elem.hover(function(){a.hoverPause=!0,d?"":a.clickSelected=a.selected,c?b._stop(a):""},function(){a.hoverPause=!1,c&&b._start(a)}),b._thumbSelected(null,a)},_startAuto:function(a){var b=this;a.timeOutID?clearTimeout(a.timeOutID):"",a.preLoad||(a.timeOutID=null,a.timeOutID=b._g(a,"autoPlay")?setTimeout(function(){b._autoPlay(a)},b._g(a,"autoTime")):null)},_autoPlay:function(a){var b=this;if(a.timeOutID&&!a.preLoad){var c;b._g(a,"loop")?(a._selected=a._selected<a.total-1?++a._selected:0,c=a.$itemList.find("li").eq(a._selected)):(a.selected=a.selected<a.total-1?++a.selected:0,c=a.$itemList.find("li").eq(a.selected)),b._thumbSelected(c,a)}a.timeOutID=b._g(a,"autoPlay")?setTimeout(function(){b._autoPlay(a)},b._g(a,"autoTime")):null},_stop:function(a){a.timeOutID&&clearTimeout(a.timeOutID)},_start:function(a){this._startAt(a)},_startAt:function(a){var b=this,c=a.$scroll,d=b._g(a,"loop"),e=b._g(a,"navSpace"),f=b._g(a,"navPlace"),g=b._g(a,"navNum"),h=(g-1)*e,i=b._g(a,"tbgAnimate"),j=b._indexAt(a),k=j.position();if(d){k=f=="lr"?k.top:k.left;if(parseInt(k)>h){if(i){var l=f=="lr"?parseInt(c.css("top")):parseInt(c.css("left"));l>h?f=="lr"?c.css("top",0):c.css("left",0):""}b._thumbSelected(null,a)}}else{var m=a.$itemList,n=f=="lr"?m.css("top"):m.css("left");k=f=="lr"?k.top:k.left,n=Math.abs(parseInt(n)),selecttedPos=Math.abs(parseInt(k));if(selecttedPos<n)a.selected=parseInt(n/e);else if(n+h<k){a.selected=parseInt(n/e);if(i){var l=f=="lr"?parseInt(c.css("top")):parseInt(c.css("left"));l>h?f=="lr"?c.css("top",0):c.css("left",0):""}}else a.clickSelected=a.selected;a.clickSelected!=a.selected&&b._thumbSelected(null,a)}b._startAuto(a)},_bindItemEvent:function(a){var b=this,c=b._g(a,"navNum"),d=b._g(a,"addtional"),e=a.$itemList,f=b._g(a,"events");e.delegate("li.",f,function(c){var d=$(this),e=d.attr("data-index");f==="click"&&c.preventDefault(),e!=a.selected&&b._thumbSelected(d,a)}),c=="css"&&d&&a.$addtional.delegate("li",f,function(c){var d=$(this),g=d.attr("data-index");f==="click"&&c.preventDefault(),g!=a.selected&&b._thumbSelected(e.find("li").eq(g),a)})},_getTitle:function(a,b,c){var d;if(typeof a=="string")return d=b=="none"?a:'<a href="'+b+'" target="'+c+'">'+a+"</a>";if(typeof a=="object"){var e=a.l?a.l:b,f=a.g?a.g:c;return d=e=="none"?a.t:'<a href="'+e+'" target="'+f+'">'+a.t+"</a>"}return""},_resetSelected:function(a){var b=this,c=b._g(a,"tbgAnimate"),d=b._g(a,"navPlace"),e=b._g(a,"tbgSpeed"),f=a.$scroll;b._scrollNext(a,0,function(){b._enabledBtnNext(a),b._disabledBtnPrev(a)}),c?d=="lr"?f.animate({top:0},e):f.animate({left:0},e):""},_thumbSelected:function(a,b){var c=this,d=c._g(b,"tbgSpeed"),e=b.scrollOver,f=c._g(b,"navPlace"),g=c._g(b,"tbgAnimate"),h=c._g(b,"tType"),i=b.$itemList,j=c._g(b,"loop"),k;b.firstPlay||(b.firstPlay=!0),a?"":j?a=i.find("li").eq(0):a=i.find("li").eq(b.selected),k=a.attr("data-index"),b.firstPlay?(b.selected=-1,b.firstPlay=!1):"",b.selected=b.clickSelected=k,b._selected=a.index();if(h=="image"){var l=a.find("img"),m=c._g(b,"opacity");typeof l[0]!="undefined"?l.stop().animate({opacity:1},"fast"):"",a.siblings().each(function(){var a=$(this),b=a.find("img");typeof b[0]!="undefined"?b.stop().animate({opacity:m},"fast"):""})}var n,o,p;f=="lr"?(n=a.position().top,o=i.css("top"),p=n-Math.abs(parseInt(o))):(n=a.position().left,o=i.css("left"),p=n-Math.abs(parseInt(o)));var q=c._g(b,"navSpace"),r=c._g(b,"navNum"),s=q*(r-1),t=function(a){p>s?c._scrollNextByStep(b):p<0?c._resetSelected(b):"",a?"":$(this).css("z-index",3)};c._display(b);if(g){var u=b.$scroll;f=="lr"?u.css("z-index",5).stop(!0,!0).animate({top:p},d,t):u.css("z-index",5).stop(!0,!0).animate({left:p},d,t)}else t(!0);a.addClass(e).siblings().removeClass(e)},_setInfo:function(a){var b=this,c=b._g(a,"showTips");if(c){var d=a.selected,e=a.data[d],f=e.l,g=b._g(a,"target"),h=b._g(a,"_ptype"),i=b._g(a,"ptype");if(i){var j=e.tp,k;k=j?h+" "+h+"-"+j:h,a.$playType[0].className=k}var l="",m=b._getTitle(e.t,f,g),n=b._getTitle(e.t1,f,g),o="";m=m!=""?"<h2>"+m+"</h2>":"",n=n!=""?"<h3>"+n+"</h3>":"";if(m!=""||n!="")o='<hr class="separator" />';l+=m+n+o;var p=e.ot;p=b._getOtherTitle(p,f,g,a),p=typeof p!="undefined"?p:"";var q=e.m?'<p class="info">'+e.m+"</p>":"";l+=p+q;if(b._g(a,"tipsBtn")){var r=b._g(a,"_tbtn"),s=b._getTipsBtn(e.b_,f,g,r);l+=s}b._tipsAnimate(a,l)}},_getTipsBtn:function(a,b,c,d){if(typeof a=="string")return'<a class="'+d+" "+d+"-"+a+'" href="'+b+'" target="'+c+'"></a>';if(typeof a!="object")return'<a class="'+d+'" href="'+b+'" target="'+c+'"></a>';var e,f,g,h;if(!isEmptyObject(a))return e=a.l?a.l:b,f=a.t?a.t:c,g=a.c?d+"-"+a.c:d,h=a.t_?a.t_:"",'<a class="'+d+" "+g+'" href="'+e+'" target="'+f+'">'+h+"</a>"},_tipsAnimate:function(a,b){var c=a.$tipsInfo,d=a.$tipsBg,e=this._g(a,"tipsAnimate"),f=c.find("div");switch(e){case"slide":b!=""?(f.html("").html(b),c.stop(!1,!0).slideUp("normal").stop(!1,!0).slideDown("normal"),d.stop(!1,!0).slideUp("normal").stop(!1,!0).slideDown("normal")):(f.html(""),c.stop(!1,!0).slideUp("fast"),d.stop(!1,!0).slideUp("fast"));break;case"fade":b!=""?(f.html("").html(b),c.stop(!1,!0).fadeOut("normal").stop(!1,!0).fadeIn("normal"),d.stop(!1,!0).fadeOut("normal").stop(!1,!0).fadeIn("normal")):(f.html(""),c.stop(!1,!0).fadeOut("fast"),d.stop(!1,!0).fadeOut("fast"));break;default:b!=""?(f.html("").html(b),c.show(),d.show()):(f.html(""),c.hide(),d.hide())}},_getOtherTitle:function(a,b,c,d){var e=this,f=e._g(d,"_otitle");if(typeof a=="string")return'<p class="'+f+'">'+a+"</p>";if(typeof a=="object"){var g=function(a){if(a&&!isArray(a))return e._getTitle(a,b,c);var d=a.length,f="";for(var g=0;g<d;g++)f+=e._getTitle(a[g],b,c);return f};if(a&&!isArray(a))return'<p class="'+f+'"><label class="name">'+e._getTitle(a.n,"none")+": </label>"+g(a.list)+"</p>";var h=a.length,i=[],j;for(var k=0;k<h;k++)j=a[k],i.push('<p class="'+f+'">'),i.push('<label class="name">'+e._getTitle(j.n,"none")+": </label>"),i.push(g(j.list)),i.push("</p>");return i.join("")}},_setCallback:function(a){var b=a.data,c=a.selected,d={id:a.id,selected:c,total:a.total,curData:b[c]?b[c]:""};a.callDone=d},_display:function(a,b){var c=this;c._stop(a);var d=c._g(a,"player"),b=c._g(a,"callback");b?c._setCallback(a):"",a.preLoad=!0;if(!d)b?b(a.callDone):"",a.preLoad=!1,a.hoverPause||c._startAuto(a);else{var e=c._g(a,"animate"),f=a.$itemList,g=a.total,h=a.$player,i=a.images;getList=function(a){return i[a]},loadListImg=function(a){var b=a.find("img");if(typeof b[0]!="undefined"){var d=b[0].src,e=b.attr("data-origital");d===c._blankImg?b[0].src=b.attr("data-origital"):d!=e?b[0].src=e:""}},dataIndex=a.selected,a.$currentli=getList(dataIndex),loadListImg(a.$currentli);var j=c._g(a,"pSpeed"),k=c._g(a,"pWidth"),l=c._g(a,"pHeight"),m=a.$currentli.index(),n=a.$currentli.find("img"),o=function(){var b=a.$currentli,d=a.played;switch(e){case"fade":c._playWithFade(b,j,g,function(){a.played=b});break;case"left":c._playLeftRight(b,k,g,j,function(){a.played=b,b.siblings().css("left",k)},"left");break;case"right":c._playLeftRight(b,k,g,j,function(){a.played=b,b.siblings().css("left",0-k)});break;case"bottom":c._playDwonUp(b,l,g,j,function(){a.played=b,b.siblings().css("top",l)},"bottom");break;case"top":c._playDwonUp($curli,l,g,j,function(){a.played=b,b.siblings().css("top",0-l)});break;default:b.stop().css("opacity",1).show().siblings().css("opacity",0).hide()}a.hoverPause||c._startAuto(a),c._setInfo(a)};f.each(function(){$(this).find("img").unbind()});if(a.completeImg[m])a.preLoad=!1,o(),b?b(a.callDone):"";else{var p=a.played;p&&p.css("opacity","0.3"),n.load(function(){a.preLoad=!1,o(),b?b(a.callDone):""}),a.completeImg.push($(this))}}},_playLeftRight:function(a,b,c,d,e,f){var g=b,h=c,i=d,j,k,l=e||function(){};f=="left"?(j=g,k=0-g):(j=0-g,k=g),a.siblings("li").each(function(a){var b=$(this);b.css({"z-index":h-a});var c=parseInt(b.css("left"));f=="left"?c<j&&c>=0?b.animate({left:k},d,function(){b.css({left:j})}):"":c<k&&c>=0?b.animate({left:k},d,function(){b.css({left:j})}):""}),a.css("opacity")&&a.css("opacity")<1&&a.css("opacity",1),a.stop(!0,!0).css({"z-index":h+1,left:j}).animate({left:0},d,l)},_playDwonUp:function(a,b,c,d,e,f){var g=b,h=c,i=d,j,k,l=e||function(){};f=="bottom"?(j=g,k=0-g):(j=0-g,k=g),a.siblings("li").each(function(a){var b=$(this);b.css({"z-index":h-a});var c=parseInt(b.css("top"));f=="bottom"?c<j&&c>=0?b.animate({top:k},d,function(){b.css({top:j})}):"":c<k&&c>=0?b.animate({top:k},d,function(){b.css({top:j})}):""}),a.css("opacity")&&a.css("opacity")<1&&a.css("opacity",1),a.stop(!0,!0).css({"z-index":h+1,top:j}).animate({top:0},d,l)},_playWithFade:function(a,b,c,d){var e=d||function(){};a.siblings().each(function(a){$(this).css({"z-index":c-a})}),a.siblings().stop().animate({opacity:0},b),a.css("z-index",c+1).stop().animate({opacity:1},b,e)},_indexAt:function(a){var b=a.selected,c=a.$itemList.find("li"),d,e,f=null,g;for(d=0,e=c.length;d<e;d++){g=$(c[d]);if(g.attr("data-index")===b){f=g;break}}return f},_btnsPrevClick:function(a){if(!a.$btnPrev||a.$btnPrev=="")return;var b=this,c=b._g(a,"navSpace"),d=b._g(a,"step"),e=a.total,f=b._g(a,"scrollSpeed"),g=b._g(a,"navPlace"),h=b._g(a,"tbgAnimate"),i=b._g(a,"loop"),j,k,l,m=a.$itemList;a.$btnPrev.bind("click",function(){if(i){if(a.btnClick){a.btnClick=!1;if(g=="lr"){h&&(l=a.$scroll,k=b._indexAt(a),j=parseInt(l.css("top")),j<(e-d)*c?"":l.css({top:k.css("top")})),m.find("li:gt("+(e-d-1)+")").insertBefore(m.find("li:first")).each(function(a){var b=$(this),d=parseInt(b.css("top"));b.css({top:d-e*c})}),m.find("li").each(function(b){var g=$(this);g.stop(!0,!0).animate({top:parseInt(g.css("top"))+d*c},f,function(){b===e-d&&(a.btnClick=!0)})});if(h){var n=b._g(a,"tbgSpeed");l.stop(!0,!0).animate({top:parseInt(k.css("top"))+c*d},n,function(){parseInt(l.css("top"))===(e-1)*c&&l.css({top:c*d-parseInt(k.css("top"))})})}}else{h&&(l=a.$scroll,k=b._indexAt(a),j=parseInt(l.css("left")),j<(e-d)*c?"":l.css({left:k.css("left")})),m.find("li:gt("+(e-d-1)+")").insertBefore(m.find("li:first")).each(function(a){var b=$(this),d=parseInt(b.css("left"));b.css({left:d-e*c})}),m.find("li").each(function(b){var g=$(this);g.stop(!0,!0).animate({left:parseInt(g.css("left"))+d*c},f,function(){b===e-d&&(a.btnClick=!0)})});if(h){var n=b._g(a,"tbgSpeed");l.stop(!0,!0).animate({left:parseInt(k.css("left"))+c*d},n,function(){parseInt(l.css("left"))===(e-1)*c&&l.css({left:c*d-parseInt(k.css("left"))})})}}}}else a.btnClick&&b._scrollPrevByStep(a)})},_btnsNextClick:function(a){if(!a.$btnNext||a.$btnNext=="")return;var b=this;a.$btnNext.bind("click",function(){a.btnClick&&b._scrollNextByStep(a,!0)})},_scrollPrevByStep:function(a){var b=this,c=b._g(a,"navSpace"),d=b._g(a,"step"),e=a.$itemList,f=b._g(a,"navPlace"),g=b._g(a,"loop"),h=b._g(a,"tbgAnimate");if(!g){b._enabledBtnNext(a);var i=f=="lr"?parseInt(e.css("top")):parseInt(e.css("left")),j=c*d;if(i===0)return;a.btnClick=!1;var k=0,l=f=="lr"?parseInt(e.css("top"))+c*d:parseInt(e.css("left"))+c*d;l>0?(k=l,l=0):"",b._scrollPrev(a,l,function(){f=="lr"?Math.abs(parseInt(e.css("top")))===0?b._disabledBtnPrev(a):"":Math.abs(parseInt(e.css("left")))===0?b._disabledBtnPrev(a):"",a.btnClick=!0});if(h){var m=a.$scroll,n=b._g(a,"tbgSpeed"),o=f=="lr"?parseInt(m.css("top"))+j:parseInt(m.css("left"))+j;f=="lr"?m.animate({top:o-k},n):m.animate({left:o-k},n)}}},_scrollNextByStep:function(a,b){var c=this,d=a.total,e=c._g(a,"navNum"),f=c._g(a,"navSpace"),g=c._g(a,"step"),h=a.$itemList,i=c._g(a,"navPlace"),j=c._g(a,"loop"),k=c._g(a,"tbgAnimate"),l=a.$scroll,m=c._g(a,"tbgSpeed"),n=c._g(a,"scrollSpeed");if(!j){c._enabledBtnPrev(a);var o=i=="lr"?parseInt(h.css("top")):parseInt(h.css("left")),q=(d-e)*f,r=f*g,s;if(Math.abs(o)===q)return;a.btnClick=!1,s=o-r,p=0,Math.abs(s)>q?(p=Math.abs(s)-q,s=0-q):"",c._scrollNext(a,s,function(){i=="lr"?Math.abs(parseInt(h.css("top")))===(d-e)*f?c._disabledBtnNext(a):"":Math.abs(parseInt(h.css("left")))===(d-e)*f?c._disabledBtnNext(a):"",a.btnClick=!0});if(k){var t=i=="lr"?parseInt(l.css("top"))-r:parseInt(l.css("left"))-r;i=="lr"?l.animate({top:t+p},m):l.animate({left:t+p},m)}}else{a.btnClick=!1;if(i=="lr"){h.find("li").each(function(e){$(this).stop().animate({top:f*(e-g)},n,function(){if(e===d-g){a.btnClick=!0,h.find("li:lt("+g+")").insertAfter(h.find("li:last")).each(function(a){var b=$(this),c=parseInt(b.css("top"));b.css({top:d*f+c})});if(!b){var i=c._indexAt(a);a._selected=i.index()}}})});if(k&&b){var u=c._indexAt(a);l.stop(!0,!0).animate({top:parseInt(u.css("top"))-f*g},m,function(){var a=parseInt(l.css("top"));a<0&&l.css({top:u.css("top")})})}k&&!b&&l.stop().animate({top:(e-g)*f},m)}else{h.find("li").each(function(e){$(this).stop().animate({left:f*(e-g)},n,function(){if(e===d-g){a.btnClick=!0,h.find("li:lt("+g+")").insertAfter(h.find("li:last")).each(function(a){var b=$(this),c=parseInt(b.css("left"));b.css({left:d*f+c})});if(!b){var i=c._indexAt(a);a._selected=i.index()}}})});if(k&&b){var u=c._indexAt(a);l.stop(!0,!0).animate({left:parseInt(u.css("left"))-f*g},m,function(){var a=parseInt(l.css("left"));a<0&&l.css({left:u.css("left")})})}k&&!b&&l.stop().animate({left:(e-g)*f},m)}}},_scrollPrev:function(a,b,c){var d=a.$itemList,e=this._g(a,"loop"),f=this._g(a,"scrollSpeed");position=this._g(a,"navPlace"),func=c||function(){},e||(position=="lr"?d.animate({top:b},f,func):d.animate({left:b},f,func))},_scrollNext:function(a,b,c){var d=a.$itemList,e=this._g(a,"loop"),f=this._g(a,"scrollSpeed");position=this._g(a,"navPlace"),func=c||function(){},e||(position=="lr"?d.animate({top:b},f,func):d.animate({left:b},f,func))},_enabledBtnPrev:function(a){var b=this._g(a,"_active");a.$btnPrev.hasClass(b)||a.$btnPrev.addClass(b)},_enabledBtnNext:function(a){var b=this._g(a,"_active");a.$btnNext.hasClass(b)||a.$btnNext.addClass(b)},_disabledBtnPrev:function(a){var b=this._g(a,"_active"),c=this._g(a,"_hover"),d=a.$btnPrev;d.hasClass(b)&&(d.removeClass(b),d.hasClass(c)&&d.removeClass(c))},_disabledBtnNext:function(a){var b=this._g(a,"_active"),c=this._g(a,"_hover"),d=a.$btnNext;d.hasClass(b)&&(d.removeClass(b),d.hasClass(c)&&d.removeClass(c))},_newInst:function(a){var b=a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:b,$elem:a,$nav:"",$btnPrev:"",$btnNext:"",$scroll:"",$navList:"",$itemList:"",$player:"",hoverPause:!1,preLoad:!0,selected:0,_selected:0,timeOutID:null,$currentli:null,clickSelected:0,$tipsBg:"",$tipsInfo:"",$deepNav:"",completeImg:[],scrollOver:null,data:null,images:[],total:0,btnClick:!0,callDone:null,played:null,$tipsType:null,firstPlay:null,$playType:""}},_g:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_getInst:function(a){try{return $.data(a,PROP_NAME)}catch(b){throw"Missing instance data for this imageShown"}},_optionImageShown:function(a,b,c){var d=this._getInst(a);if(arguments.length==2&&typeof b=="string")return b=="defaults"?$.extend({},$.imageShownT._defaults):d?b=="all"?$.extend({},d.settings):this._g(d,b):null;var e=b||{};typeof b=="string"&&(e={},e[b]=c),d&&(extendRemove(d.settings,e),this._updateImageShown(d)),d=null}}),$.fn.imageShown=function(a){if(!this.length)return this;$.imageShown.initialized||($.imageShown.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return a=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.imageShown["_"+a+"ImageShown"].apply($.imageShown,[this[0]].concat(b)):this.each(function(){typeof a=="string"?$.imageShown["_"+a+"ImageShown"].apply($.imageShown,[this].concat(b)):$.imageShown._instImageShown(this,a)})},$.imageShown=new ImageShown,$.imageShown.initialized=!1,$.imageShown.uuid=(new Date).getTime(),$.imageShown.version="@VERSION"})(jQuery)